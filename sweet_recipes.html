<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Przepiśnik</title>
    <link href="https://fonts.googleapis.com/css?family=Clicker+Script|Playball|Stalemate&display=swap&subset=latin-ext"
        rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <script src="/js/main.js" defer></script>
</head>

<body>

    <section class="sweet-recipes">
        <header class="sweet-recipes_title">
            <h3>Na słodko</h3>
        </header>

        <section class="sweet-recipes_list">
            <ul>
            </ul>

            <div class="add-recipe-btn">
                <a href="/new_recipe.html?category=sweet">Dodaj nowy przepis</a>
            </div>
        </section>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", function () {

            // wyświetlenie przepisów z localStorage 
            function renderRecipesList() {
                let allRecipes = JSON.parse(localStorage.getItem("recipes"));
                const sweetRecipesList = document.querySelector(".sweet-recipes_list ul");
                
                allRecipes.forEach(function (singleRecipe, i) {
                    let newTitle = document.createElement("li");
                    let newTitleLink = document.createElement("a");
                    if (singleRecipe.category === "sweet") {
                        newTitleLink.href = `/show_recipe.html?category=sweet&id=${i}`;
                        newTitleLink.innerHTML = singleRecipe.title;
                        newTitle.appendChild(newTitleLink);
                        sweetRecipesList.appendChild(newTitle);
                    }
                });
            }
            window.addEventListener("load", renderRecipesList, false);

        });
    </script>
</body>

</html>